<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Circle of Cats - WebXR Gallery</title>
  <link rel="stylesheet" href="style.css">
  
  <!-- A-Frame Core -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  
  <!-- Particle System Component (for sparkles) -->
  <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
</head>
<body>

  <!-- Loading Screen -->
  <div id="loading-screen">
    <div class="loader"></div>
    <p>Loading Circle of Cats...</p>
  </div>

  <!-- A-Frame Scene -->
  <a-scene 
    loading-screen="enabled: false"
    fog="type: exponential; color: #1a1a2e; density: 0.05">
    
    <!-- Asset Management System -->
    <a-assets>
      <!-- Cat Models -->
      <a-asset-item id="cat1" src="assets/models/cat_01.glb"></a-asset-item>
      <a-asset-item id="cat2" src="assets/models/cat_02.glb"></a-asset-item>
      <a-asset-item id="cat3" src="assets/models/cat_03.glb"></a-asset-item>
      <a-asset-item id="cat4" src="assets/models/cat_04.glb"></a-asset-item>
      <a-asset-item id="cat5" src="assets/models/cat_05.glb"></a-asset-item>
    </a-assets>

    <!-- ============================================ -->
    <!-- CAMERA RIG (WASD Movement) -->
    <!-- ============================================ -->
    <a-entity id="camera-rig" position="0 0 5">
      <a-camera 
        position="0 1.6 0"
        look-controls="pointerLockEnabled: true"
        wasd-controls="acceleration: 50"
        interaction-controller>
      </a-camera>
    </a-entity>

    <!-- ============================================ -->
    <!-- LIGHTING SYSTEM -->
    <!-- ============================================ -->
    
    <!-- Ambient Light (low) -->
    <a-light type="ambient" color="#2a2a4a" intensity="0.3"></a-light>

    <!-- Spotlights for Each Pedestal -->
    <!-- Pedestal 1 (Left -60°) -->
    <a-light 
      type="spot" 
      position="-4.33 6 -2.5"
      target="#pedestal-01"
      angle="60"
      penumbra="0.5"
      intensity="1.2"
      color="#ffffff"
      cast-shadow="true">
    </a-light>

    <!-- Pedestal 2 (Left -30°) -->
    <a-light 
      type="spot" 
      position="-2.6 6 -4.5"
      target="#pedestal-02"
      angle="60"
      penumbra="0.5"
      intensity="1.2"
      color="#ffffff"
      cast-shadow="true">
    </a-light>

    <!-- Pedestal 3 (Center 0°) -->
    <a-light 
      type="spot" 
      position="0 6 -5"
      target="#pedestal-03"
      angle="60"
      penumbra="0.5"
      intensity="1.2"
      color="#ffffff"
      cast-shadow="true">
    </a-light>

    <!-- Pedestal 4 (Right +30°) -->
    <a-light 
      type="spot" 
      position="2.6 6 -4.5"
      target="#pedestal-04"
      angle="60"
      penumbra="0.5"
      intensity="1.2"
      color="#ffffff"
      cast-shadow="true">
    </a-light>

    <!-- Pedestal 5 (Right +60°) -->
    <a-light 
      type="spot" 
      position="4.33 6 -2.5"
      target="#pedestal-05"
      angle="60"
      penumbra="0.5"
      intensity="1.2"
      color="#ffffff"
      cast-shadow="true">
    </a-light>

    <!-- ============================================ -->
    <!-- BACKGROUND (Radial Glow Sky) -->
    <!-- ============================================ -->
    <a-sky 
      color="#0f0f1e"
      shader="gradient"
      material="shader: gradient; topColor: #1a1a2e; bottomColor: #0a0a14">
    </a-sky>

    <!-- Background Glow Sphere (inverted) -->
    <a-sphere 
      radius="50"
      scale="-1 1 1"
      material="shader: flat; color: #1a1a2e; opacity: 0.8; side: back">
    </a-sphere>

    <!-- ============================================ -->
    <!-- MAIN PLATFORM -->
    <!-- ============================================ -->
    <a-cylinder 
      id="main-platform"
      position="0 -0.1 -2"
      radius="10"
      height="0.2"
      color="#2a2a3e"
      material="roughness: 0.9; metalness: 0.1"
      shadow="receive: true">
    </a-cylinder>

    <!-- ============================================ -->
    <!-- PEDESTALS + CATS (Semi-Circle Layout) -->
    <!-- ============================================ -->

    <!-- PEDESTAL 1 (Left -60° = -240° in radians) -->
    <a-entity id="station-01" position="-4.33 0 -2.5">
      <!-- Pedestal -->
      <a-cylinder 
        id="pedestal-01"
        radius="0.6"
        height="1.2"
        color="#3a3a4e"
        material="roughness: 0.8; metalness: 0.2"
        shadow="cast: true; receive: true">
      </a-cylinder>
      
      <!-- Cat Model -->
      <a-entity 
        id="cat-01"
        gltf-model="#cat1"
        position="0 1.3 0"
        scale="0.8 0.8 0.8"
        rotation="0 -30 0">
      </a-entity>

      <!-- Interaction Zone -->
      <a-entity 
        proximity-zone="catId: cat-01; radius: 1.4"
        position="0 0.6 0">
      </a-entity>

      <!-- Sparkle Effect (hidden by default) -->
      <a-entity 
        id="sparkles-01"
        position="0 1.5 0"
        particle-system="
          preset: default;
          color: #FFD700, #FFA500, #FFFFFF;
          particleCount: 30;
          maxAge: 1;
          blending: 1;
          size: 0.3;
          opacity: 1, 0;
          enabled: false"
        sparkle-effect>
      </a-entity>
    </a-entity>

    <!-- PEDESTAL 2 (Left -30°) -->
    <a-entity id="station-02" position="-2.6 0 -4.5">
      <a-cylinder 
        id="pedestal-02"
        radius="0.6"
        height="1.2"
        color="#3a3a4e"
        material="roughness: 0.8; metalness: 0.2"
        shadow="cast: true; receive: true">
      </a-cylinder>
      
      <a-entity 
        id="cat-02"
        gltf-model="#cat2"
        position="0 1.3 0"
        scale="0.8 0.8 0.8"
        rotation="0 -15 0">
      </a-entity>

      <a-entity 
        proximity-zone="catId: cat-02; radius: 1.4"
        position="0 0.6 0">
      </a-entity>

      <a-entity 
        id="sparkles-02"
        position="0 1.5 0"
        particle-system="
          preset: default;
          color: #FFD700, #FFA500, #FFFFFF;
          particleCount: 30;
          maxAge: 1;
          blending: 1;
          size: 0.3;
          opacity: 1, 0;
          enabled: false"
        sparkle-effect>
      </a-entity>
    </a-entity>

    <!-- PEDESTAL 3 (Center 0°) -->
    <a-entity id="station-03" position="0 0 -5">
      <a-cylinder 
        id="pedestal-03"
        radius="0.6"
        height="1.2"
        color="#3a3a4e"
        material="roughness: 0.8; metalness: 0.2"
        shadow="cast: true; receive: true">
      </a-cylinder>
      
      <a-entity 
        id="cat-03"
        gltf-model="#cat3"
        position="0 1.3 0"
        scale="0.8 0.8 0.8"
        rotation="0 0 0">
      </a-entity>

      <a-entity 
        proximity-zone="catId: cat-03; radius: 1.4"
        position="0 0.6 0">
      </a-entity>

      <a-entity 
        id="sparkles-03"
        position="0 1.5 0"
        particle-system="
          preset: default;
          color: #FFD700, #FFA500, #FFFFFF;
          particleCount: 30;
          maxAge: 1;
          blending: 1;
          size: 0.3;
          opacity: 1, 0;
          enabled: false"
        sparkle-effect>
      </a-entity>
    </a-entity>

    <!-- PEDESTAL 4 (Right +30°) -->
    <a-entity id="station-04" position="2.6 0 -4.5">
      <a-cylinder 
        id="pedestal-04"
        radius="0.6"
        height="1.2"
        color="#3a3a4e"
        material="roughness: 0.8; metalness: 0.2"
        shadow="cast: true; receive: true">
      </a-cylinder>
      
      <a-entity 
        id="cat-04"
        gltf-model="#cat4"
        position="0 1.3 0"
        scale="0.8 0.8 0.8"
        rotation="0 15 0">
      </a-entity>

      <a-entity 
        proximity-zone="catId: cat-04; radius: 1.4"
        position="0 0.6 0">
      </a-entity>

      <a-entity 
        id="sparkles-04"
        position="0 1.5 0"
        particle-system="
          preset: default;
          color: #FFD700, #FFA500, #FFFFFF;
          particleCount: 30;
          maxAge: 1;
          blending: 1;
          size: 0.3;
          opacity: 1, 0;
          enabled: false"
        sparkle-effect>
      </a-entity>
    </a-entity>

    <!-- PEDESTAL 5 (Right +60°) -->
    <a-entity id="station-05" position="4.33 0 -2.5">
      <a-cylinder 
        id="pedestal-05"
        radius="0.6"
        height="1.2"
        color="#3a3a4e"
        material="roughness: 0.8; metalness: 0.2"
        shadow="cast: true; receive: true">
      </a-cylinder>
      
      <a-entity 
        id="cat-05"
        gltf-model="#cat5"
        position="0 1.3 0"
        scale="0.8 0.8 0.8"
        rotation="0 30 0">
      </a-entity>

      <a-entity 
        proximity-zone="catId: cat-05; radius: 1.4"
        position="0 0.6 0">
      </a-entity>

      <a-entity 
        id="sparkles-05"
        position="0 1.5 0"
        particle-system="
          preset: default;
          color: #FFD700, #FFA500, #FFFFFF;
          particleCount: 30;
          maxAge: 1;
          blending: 1;
          size: 0.3;
          opacity: 1, 0;
          enabled: false"
        sparkle-effect>
      </a-entity>
    </a-entity>

    <!-- ============================================ -->
    <!-- UI HINT SYSTEM -->
    <!-- ============================================ -->
    <a-entity id="hint-ui" position="0 0 -2" visible="false">
      <a-plane 
        width="2"
        height="0.5"
        color="#1a1a2e"
        opacity="0.8"
        material="transparent: true">
      </a-plane>
      <a-text 
        value="Press E or Click to Pet"
        align="center"
        width="3"
        position="0 0 0.01"
        color="#ffffff">
      </a-text>
    </a-entity>

  </a-scene>

  <!-- Custom Interaction Components -->
  <script src="js/interactions.js"></script>

  <!-- Loading Screen Controller -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const scene = document.querySelector('a-scene');
      const loadingScreen = document.getElementById('loading-screen');
      
      scene.addEventListener('loaded', function() {
        setTimeout(() => {
          loadingScreen.style.opacity = '0';
          setTimeout(() => {
            loadingScreen.style.display = 'none';
          }, 500);
        }, 1000);
      });
    });
  </script>

</body>
</html>