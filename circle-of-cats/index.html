<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Circle of Cats - v4 Models + Sound</title>
  
  <!-- Favicon (prevents 404 error) -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üê±</text></svg>">
  
  <style>
    body { margin: 0; overflow: hidden; }
    #info {
      position: fixed;
      top: 20px;
      left: 20px;
      color: white;
      font-family: monospace;
      background: rgba(0,0,0,0.7);
      padding: 10px;
      border-radius: 5px;
      z-index: 100;
      font-size: 14px;
    }
    
    #hint {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-family: monospace;
      background: rgba(26,26,46,0.9);
      padding: 15px 30px;
      border-radius: 8px;
      font-size: 18px;
      display: none;
      z-index: 100;
      border: 2px solid rgba(255,215,0,0.5);
    }
    #hint.visible {
      display: block;
      animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateX(-50%) translateY(10px); }
      to { opacity: 1; transform: translateX(-50%) translateY(0); }
    }
    #loading-status {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-family: monospace;
      background: rgba(0,0,0,0.8);
      padding: 20px 40px;
      border-radius: 10px;
      font-size: 16px;
      z-index: 200;
    }
    #audio-prompt {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-family: monospace;
      background: rgba(26,26,46,0.95);
      padding: 30px 50px;
      border-radius: 15px;
      font-size: 18px;
      z-index: 300;
      text-align: center;
      border: 2px solid rgba(255,215,0,0.5);
      display: none;
    }
    #audio-prompt button {
      margin-top: 20px;
      padding: 12px 30px;
      font-size: 16px;
      font-family: monospace;
      background: rgba(255,215,0,0.2);
      border: 2px solid rgba(255,215,0,0.7);
      color: white;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    #audio-prompt button:hover {
      background: rgba(255,215,0,0.4);
      border-color: rgba(255,215,0,1);
    }
  </style>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
</head>
<body>

<div id="info">
    <strong>Circle of Cats - v4 MVP</strong><br>
    WASD: Move | Mouse: Look<br>
    Walk near a cat to interact
  </div>

<div id="hint">Press <strong>E</strong> or <strong>Click</strong> to Pet</div>

<div id="loading-status">Loading models...</div>

<div id="audio-prompt">
    <p><strong>üîä Enable Audio?</strong></p>
    <p style="font-size: 14px; color: #ccc;">Click to start background music</p>
    <button id="enable-audio-btn">Enable Audio</button>
  </div>

<a-scene 
    background="color: #0a0a14"
    fog="type: exponential; color: #0a0a14; density: 0.05">

<!-- ============================================ -->
    <!-- ASSETS (Models + Sounds) -->
    <!-- ============================================ -->
    <a-assets>
      <!-- Cat Models -->
      <a-asset-item id="model-cat-01" src="assets/models/cat_01.glb"></a-asset-item>
      <a-asset-item id="model-cat-02" src="assets/models/cat_02.glb"></a-asset-item>
      <a-asset-item id="model-cat-03" src="assets/models/cat_03.glb"></a-asset-item>
      <a-asset-item id="model-cat-04" src="assets/models/cat_04.glb"></a-asset-item>
      <a-asset-item id="model-cat-05" src="assets/models/cat_05.glb"></a-asset-item>

<!-- Cat Sounds (.wav) -->
      <audio id="sound-cat-01" src="assets/sounds/cat_01_sound.wav" preload="auto"></audio>
      <audio id="sound-cat-02" src="assets/sounds/cat_02_sound.wav" preload="auto"></audio>
      <audio id="sound-cat-03" src="assets/sounds/cat_03_sound.wav" preload="auto"></audio>
      <audio id="sound-cat-04" src="assets/sounds/cat_04_sound.wav" preload="auto"></audio>
      <audio id="sound-cat-05" src="assets/sounds/cat_05_sound.wav" preload="auto"></audio>

<!-- Background Music (2min loop) -->
      <audio id="background-music" src="assets/sounds/background_sound.mp3" preload="auto" loop></audio>
    </a-assets>

<!-- ============================================ -->
    <!-- CAMERA RIG WITH BACKGROUND MUSIC -->
    <!-- ============================================ -->
    <a-entity id="rig" position="0 0 5">
      <a-camera 
        id="player-camera"
        position="0 1.6 0" 
        look-controls 
        wasd-controls="acceleration: 30"
        interaction-controller>

<!-- Background Music (10% volume, looped) -->
        <a-entity 
          sound="src: #background-music; autoplay: false; loop: true; volume: 0.1">
        </a-entity>
      </a-camera>
    </a-entity>

<!-- Dark Sky -->
    <a-sky color="#0f0f1e"></a-sky>

<!-- Soft ambient glow -->
    <a-light type="ambient" color="#1a1a3e" intensity="0.3"></a-light>

<!-- Soft directional light -->
    <a-light type="directional" position="0 8 0" intensity="0.4" color="#ffffff"></a-light>

<!-- Ground (dark) -->
    <a-plane 
      position="0 -0.01 0" 
      rotation="-90 0 0" 
      width="30" 
      height="30" 
      color="#0a0a14">
    </a-plane>

<!-- Main Platform (matte dark) -->
    <a-cylinder 
      position="0 0 -2" 
      radius="9" 
      height="0.15" 
      color="#1e1e2e"
      material="roughness: 1; metalness: 0">
    </a-cylinder>

<!-- ============================================ -->
    <!-- STATIONS WITH CAT MODELS -->
    <!-- ============================================ -->

<!-- STATION 1 (Left -60¬∞) -->
    <a-entity id="station-01" position="-4.33 0 -2.5">
      <a-cylinder 
        radius="0.55" 
        height="1.26" 
        color="#2a2a3e"
        material="roughness: 0.9; metalness: 0.1">
      </a-cylinder>

<a-light 
        type="spot" 
        position="0 4 0" 
        intensity="1.8"
        angle="50"
        penumbra="0.6"
        color="#ffe4b5"
        target="#station-01">
      </a-light>

<a-entity 
        id="cat-01"
        position="0 1.3 0"
        rotation="0 30 0"
        scale="0.8 0.8 0.8"
        cat-model="modelId: #model-cat-01; fallbackColor: #ff8566"
        cat-glow="originalColor: #ff8566"
        cat-sound="soundId: #sound-cat-01; volume: 0.5">
      </a-entity>

<a-entity 
        proximity-zone="catId: cat-01; radius: 1.8"
        position="0 0.63 0">
      </a-entity>
    </a-entity>

<!-- STATION 2 (Left -30¬∞) -->
    <a-entity id="station-02" position="-2.6 0 -4.5">
      <a-cylinder 
        radius="0.55" 
        height="1.26" 
        color="#2a2a3e"
        material="roughness: 0.9; metalness: 0.1">
      </a-cylinder>

<a-light 
        type="spot" 
        position="0 4 0" 
        intensity="1.8"
        angle="50"
        penumbra="0.6"
        color="#ffe4b5"
        target="#station-02">
      </a-light>

<a-entity 
        id="cat-02"
        position="0 1.3 0"
        rotation="0 15 0"
        scale="0.8 0.8 0.8"
        cat-model="modelId: #model-cat-02; fallbackColor: #ffb366"
        cat-glow="originalColor: #ffb366"
        cat-sound="soundId: #sound-cat-02; volume: 0.5">
      </a-entity>

<a-entity 
        proximity-zone="catId: cat-02; radius: 1.8"
        position="0 0.63 0">
      </a-entity>
    </a-entity>

<!-- STATION 3 (Center 0¬∞) -->
    <a-entity id="station-03" position="0 0 -5">
      <a-cylinder 
        radius="0.55" 
        height="1.26" 
        color="#2a2a3e"
        material="roughness: 0.9; metalness: 0.1">
      </a-cylinder>

<a-light 
        type="spot" 
        position="0 4 0" 
        intensity="1.8"
        angle="50"
        penumbra="0.6"
        color="#ffe4b5"
        target="#station-03">
      </a-light>

<a-entity 
        id="cat-03"
        position="0 1.3 0"
        rotation="0 0 0"
        scale="0.8 0.8 0.8"
        cat-model="modelId: #model-cat-03; fallbackColor: #ffd966"
        cat-glow="originalColor: #ffd966"
        cat-sound="soundId: #sound-cat-03; volume: 0.5">
      </a-entity>

<a-entity 
        proximity-zone="catId: cat-03; radius: 1.8"
        position="0 0.63 0">
      </a-entity>
    </a-entity>

<!-- STATION 4 (Right +30¬∞) - QUIETER SOUND -->
    <a-entity id="station-04" position="2.6 0 -4.5">
      <a-cylinder 
        radius="0.55" 
        height="1.26" 
        color="#2a2a3e"
        material="roughness: 0.9; metalness: 0.1">
      </a-cylinder>

<a-light 
        type="spot" 
        position="0 4 0" 
        intensity="1.8"
        angle="50"
        penumbra="0.6"
        color="#ffe4b5"
        target="#station-04">
      </a-light>

<a-entity 
        id="cat-04"
        position="0 1.3 0"
        rotation="0 -15 0"
        scale="0.8 0.8 0.8"
        cat-model="modelId: #model-cat-04; fallbackColor: #b8b8b8"
        cat-glow="originalColor: #b8b8b8"
        cat-sound="soundId: #sound-cat-04; volume: 0.45">
      </a-entity>

<a-entity 
        proximity-zone="catId: cat-04; radius: 1.8"
        position="0 0.63 0">
      </a-entity>
    </a-entity>

<!-- STATION 5 (Right +60¬∞) - QUIETER SOUND -->
    <a-entity id="station-05" position="4.33 0 -2.5">
      <a-cylinder 
        radius="0.55" 
        height="1.26" 
        color="#2a2a3e"
        material="roughness: 0.9; metalness: 0.1">
      </a-cylinder>

<a-light 
        type="spot" 
        position="0 4 0" 
        intensity="1.8"
        angle="50"
        penumbra="0.6"
        color="#ffe4b5"
        target="#station-05">
      </a-light>

<a-entity 
        id="cat-05"
        position="0 1.3 0"
        rotation="0 -30 0"
        scale="0.8 0.8 0.8"
        cat-model="modelId: #model-cat-05; fallbackColor: #333333"
        cat-glow="originalColor: #333333"
        cat-sound="soundId: #sound-cat-05; volume: 0.45">
      </a-entity>

<a-entity 
        proximity-zone="catId: cat-05; radius: 1.8"
        position="0 0.63 0">
      </a-entity>
    </a-entity>

</a-scene>

<!-- Interaction System -->
  <script src="js/interactions.js"></script>

<script>
    // ============================================
    // SCENE LOADING & AUDIO MANAGEMENT
    // ============================================

const scene = document.querySelector('a-scene');
    const loadingStatus = document.getElementById('loading-status');
    const audioPrompt = document.getElementById('audio-prompt');
    const enableAudioBtn = document.getElementById('enable-audio-btn');

let audioEnabled = false;
    let assetsLoaded = 0;
    let totalAssets = 5; // 5 models

// Hide loading screen when scene loads
    scene.addEventListener('loaded', function() {
      console.log('‚úÖ Scene v4 MVP loaded');
      loadingStatus.style.display = 'none';

// Show audio prompt after brief delay
      setTimeout(() => {
        audioPrompt.style.display = 'block';
      }, 500);
    });

// Enable audio button
    enableAudioBtn.addEventListener('click', function() {
      enableAudio();
      audioPrompt.style.display = 'none';
    });

// Also enable audio on first scene click (pointer lock)
    document.addEventListener('click', function enableOnFirstClick() {
      if (!audioEnabled) {
        enableAudio();
      }
    }, { once: true });

function enableAudio() {
      if (audioEnabled) return;

const bgMusic = document.getElementById('background-music');

if (bgMusic) {
        bgMusic.volume = 0.1; // 10% volume
        bgMusic.loop = true;

bgMusic.play().then(() => {
          console.log('üéµ Background music started');
          audioEnabled = true;
        }).catch((error) => {
          console.warn('‚ö†Ô∏è Background music autoplay blocked:', error);
        });
      }
    }

// Show asset loading progress
    document.querySelectorAll('a-asset-item').forEach(asset => {
      asset.addEventListener('loaded', () => {
        assetsLoaded++;
        loadingStatus.textContent = `Loading models... ${assetsLoaded}/${totalAssets}`;
      });

asset.addEventListener('error', (e) => {
        console.warn('‚ö†Ô∏è Failed to load:', asset.getAttribute('src'));
      });
    });

// Log audio loading
    document.querySelectorAll('audio').forEach(audio => {
      audio.addEventListener('loadeddata', () => {
        console.log('‚úÖ Audio loaded:', audio.getAttribute('src'));
      });

audio.addEventListener('error', (e) => {
        console.warn('‚ö†Ô∏è Audio failed:', audio.getAttribute('src'));
      });
    });
  </script>

</body>
</html>